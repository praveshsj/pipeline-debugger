# ğŸ—ï¸ Pipeline Debugger Architecture

## System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         YOUR AIRFLOW/PREFECT                         â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  DAG 1   â”‚    â”‚  DAG 2   â”‚    â”‚  DAG 3   â”‚    â”‚  DAG N   â”‚      â”‚
â”‚  â”‚          â”‚    â”‚          â”‚    â”‚          â”‚    â”‚          â”‚      â”‚
â”‚  â”‚  âŒ FAIL â”‚    â”‚    âœ…     â”‚    â”‚  âŒ FAIL â”‚    â”‚    âœ…     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚       â”‚                                â”‚                             â”‚
â”‚       â”‚ HTTP POST                      â”‚ HTTP POST                   â”‚
â”‚       â”‚ /webhook/failure               â”‚ /webhook/failure            â”‚
â”‚       â”‚                                â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PIPELINE DEBUGGER API                           â”‚
â”‚                         (FastAPI Backend)                            â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    WEBHOOK RECEIVER                          â”‚   â”‚
â”‚  â”‚  â€¢ Creates Incident record                                  â”‚   â”‚
â”‚  â”‚  â€¢ Triggers background processing                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â”‚                                            â”‚
â”‚                         â–¼                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              EVIDENCE COLLECTOR                              â”‚   â”‚
â”‚  â”‚                                                              â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚  â”‚ Airflow Logs â”‚  â”‚ Git Commits  â”‚  â”‚Schema Changesâ”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚   â”‚
â”‚  â”‚  â”‚Upstream Tasksâ”‚  â”‚Similar Cases â”‚                        â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â”‚                                            â”‚
â”‚                         â–¼                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                  AI ANALYSIS ENGINE                          â”‚   â”‚
â”‚  â”‚                                                              â”‚   â”‚
â”‚  â”‚  Evidence â†’ Format â†’ Claude API â†’ Parse Response            â”‚   â”‚
â”‚  â”‚                         â”‚                                    â”‚   â”‚
â”‚  â”‚                         â–¼                                    â”‚   â”‚
â”‚  â”‚                  â€¢ Root Cause                                â”‚   â”‚
â”‚  â”‚                  â€¢ Confidence Score                          â”‚   â”‚
â”‚  â”‚                  â€¢ Detailed Explanation                      â”‚   â”‚
â”‚  â”‚                  â€¢ Recommended Fixes                         â”‚   â”‚
â”‚  â”‚                  â€¢ Impact Assessment                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â”‚                                            â”‚
â”‚                         â–¼                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                  FIX GENERATOR                               â”‚   â”‚
â”‚  â”‚                                                              â”‚   â”‚
â”‚  â”‚  â€¢ Generate code patches (SQL, Python)                      â”‚   â”‚
â”‚  â”‚  â€¢ Create GitHub branch                                     â”‚   â”‚
â”‚  â”‚  â€¢ Open Pull Request                                        â”‚   â”‚
â”‚  â”‚  â€¢ Calculate blast radius                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â”‚                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚         POSTGRESQL DATABASE         â”‚
         â”‚        (with pgvector)              â”‚
         â”‚                                     â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
         â”‚  â”‚ Incidents Table              â”‚  â”‚
         â”‚  â”‚ â€¢ id, dag_id, task_id        â”‚  â”‚
         â”‚  â”‚ â€¢ error_message, status      â”‚  â”‚
         â”‚  â”‚ â€¢ root_cause, confidence     â”‚  â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
         â”‚                                     â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
         â”‚  â”‚ Evidence Table               â”‚  â”‚
         â”‚  â”‚ â€¢ incident_id (FK)           â”‚  â”‚
         â”‚  â”‚ â€¢ evidence_type, content     â”‚  â”‚
         â”‚  â”‚ â€¢ relevance_score            â”‚  â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
         â”‚                                     â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
         â”‚  â”‚ Fixes Table                  â”‚  â”‚
         â”‚  â”‚ â€¢ incident_id (FK)           â”‚  â”‚
         â”‚  â”‚ â€¢ fix_type, code_patch       â”‚  â”‚
         â”‚  â”‚ â€¢ github_pr_url, status      â”‚  â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
         â”‚                                     â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
         â”‚  â”‚ Patterns Table (pgvector)    â”‚  â”‚
         â”‚  â”‚ â€¢ error_embedding            â”‚  â”‚
         â”‚  â”‚ â€¢ common_root_causes         â”‚  â”‚
         â”‚  â”‚ â€¢ fix_templates              â”‚  â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚
                          â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚        FRONTEND DASHBOARD           â”‚
         â”‚        (Next.js - Optional)         â”‚
         â”‚                                     â”‚
         â”‚  ğŸ“Š View Incidents                  â”‚
         â”‚  ğŸ” Inspect Evidence                â”‚
         â”‚  ğŸ”§ Review Fixes                    â”‚
         â”‚  ğŸ“ˆ See Statistics                  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow

### 1. Failure Detection
```
Pipeline Fails â†’ Airflow Detects â†’ Webhook Fires â†’ API Receives
```

### 2. Evidence Collection (Parallel)
```
Incident Created
    â”œâ”€â†’ Fetch Logs from Airflow
    â”œâ”€â†’ Get Recent Git Commits  
    â”œâ”€â†’ Check Schema Changes
    â”œâ”€â†’ Query Upstream Status
    â””â”€â†’ Find Similar Past Incidents
```

### 3. AI Analysis
```
All Evidence â†’ Format Prompt â†’ Claude API â†’ JSON Response
    â”‚
    â”œâ”€â†’ Root Cause
    â”œâ”€â†’ Confidence Score
    â”œâ”€â†’ Explanation
    â”œâ”€â†’ Fix Recommendations
    â””â”€â†’ Impact Assessment
```

### 4. Fix Generation
```
Approved Fix â†’ Create Branch â†’ Apply Patch â†’ Open PR â†’ Link to Incident
```

### 5. Learning
```
Resolved Incident â†’ Extract Pattern â†’ Generate Embedding â†’ Store for Future
```

## Integration Points

### External APIs Used
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Anthropic Claude â”‚  â† AI analysis & fix generation
â”‚ (Claude API)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GitHub API       â”‚  â† PR creation, branch management
â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Airflow API      â”‚  â† Log fetching, task metadata
â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Data Warehouse   â”‚  â† Schema change history
â”‚ (Snowflake, etc) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## File Structure

```
pipeline-debugger/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â””â”€â”€ routes/
â”‚   â”‚   â”‚       â”œâ”€â”€ health.py          âœ… Health checks
â”‚   â”‚   â”‚       â”œâ”€â”€ webhooks.py        âœ… Receive failures
â”‚   â”‚   â”‚       â”œâ”€â”€ incidents.py       âœ… CRUD operations
â”‚   â”‚   â”‚       â””â”€â”€ analysis.py        âœ… Trigger analysis
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”‚   â”œâ”€â”€ config.py              âœ… Settings
â”‚   â”‚   â”‚   â””â”€â”€ database.py            âœ… DB connection
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â””â”€â”€ incident.py            âœ… All DB models
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ evidence_collector.py  ğŸ”§ TODO: Implement
â”‚   â”‚   â”‚   â”œâ”€â”€ analysis_orchestrator.py ğŸ”§ TODO: Wire up
â”‚   â”‚   â”‚   â””â”€â”€ fix_generator.py       ğŸ”§ TODO: Implement
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ integrations/
â”‚   â”‚   â”‚   â”œâ”€â”€ claude/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ analysis.py        âœ… Claude service
â”‚   â”‚   â”‚   â”œâ”€â”€ airflow/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ log_fetcher.py     ğŸ”§ TODO: Implement
â”‚   â”‚   â”‚   â””â”€â”€ github/
â”‚   â”‚   â”‚       â””â”€â”€ pr_creator.py      ğŸ”§ TODO: Implement
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ main.py                    âœ… FastAPI app
â”‚   â”‚
â”‚   â”œâ”€â”€ requirements.txt               âœ…
â”‚   â”œâ”€â”€ .env.example                   âœ…
â”‚   â””â”€â”€ alembic.ini                    âœ…
â”‚
â”œâ”€â”€ README.md                          âœ…
â”œâ”€â”€ GETTING_STARTED.md                 âœ…
â””â”€â”€ PROJECT_SUMMARY.md                 âœ…
```

## Technology Stack

### Backend
- **FastAPI** - Web framework
- **SQLAlchemy** - ORM
- **PostgreSQL** - Database
- **pgvector** - Vector similarity search
- **Celery** - Background tasks
- **Redis** - Task queue

### AI
- **Anthropic Claude** - Analysis & reasoning
- **OpenAI Embeddings** - Pattern matching (optional)

### Integrations
- **PyGithub** - GitHub API
- **Apache Airflow Client** - Airflow API
- **GitPython** - Git operations

### Infrastructure
- **Docker** - Containerization
- **Railway/Render** - Hosting
- **Vercel** - Frontend hosting (optional)

## Security Considerations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Environment Variables (.env)        â”‚
â”‚ â€¢ API keys (Claude, GitHub)         â”‚
â”‚ â€¢ Database credentials              â”‚
â”‚ â€¢ Secret key for JWT                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“ Never commit to git
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ .gitignore includes:                â”‚
â”‚ â€¢ .env                              â”‚
â”‚ â€¢ __pycache__                       â”‚
â”‚ â€¢ *.pyc                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Performance Optimization

### Database
- Indexes on: dag_id, task_id, execution_date, status
- Connection pooling (20 connections)
- pgvector for fast similarity search

### API
- Background tasks for long operations
- Async/await where possible
- Response caching (future)

### Cost
- Claude API: ~$0.03 per analysis
- Database: Minimal (< $20/month)
- Infrastructure: $20-50/month

## Monitoring & Observability

```
Future additions:
â”œâ”€â”€ Sentry (error tracking)
â”œâ”€â”€ PostHog (analytics)
â”œâ”€â”€ Prometheus (metrics)
â””â”€â”€ Grafana (dashboards)
```

---

**This architecture is designed to be:**
- âœ… Scalable (async, background tasks)
- âœ… Extensible (plugin pattern for collectors)
- âœ… Cost-effective (~$0.03 per incident)
- âœ… Reliable (retries, error handling)
- âœ… Fast (parallel evidence collection)
